
@{
    ViewBag.Title = "mis_puntos";
    Layout = "~/Views/Shared/frontend_usuario.cshtml";
}

<h2>@ViewData["datos"]</h2>
@section SideBar{
    <li >
        <a href="~/usuariofron/miscontactos">
            <i class="pe-7s-graph"></i>
            <p>Mis Contactos</p>
        </a>
    </li>
  
<li>
    <a data-toggle="collapse" href="#formsExamples">
        <i class="pe-7s-note2"></i>
        <p>
          Puntos de peligro
            <b class="caret"></b>
        </p>
    </a>
    <div class="collapse in" id="formsExamples">
        <ul class="nav">
            <li>
                <a href="~/usuariofron/puntos">
                    <i class="pe-7s-graph"></i>
                    <p>Agregar puntos</p>
                </a>


            </li>
            <li class="active">
                <a href="~/usuariofron/mis_puntos">
                    <i class="pe-7s-graph"></i>
                    <p>Mis puntos</p>
                </a>
            </li>
          
           
        </ul>
    </div>
</li>
  
    <li>
        <a href="~/usuariofron/miscontactos">
            <i class="pe-7s-graph"></i>
            <p>Mensajes</p>
        </a>
    </li>

}
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>

<link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" />
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
<script type="text/javascript" src='https://maps.google.com/maps/api/js?sensor=false&libraries=places&key=AIzaSyCuiUJxL3eVPwCyGdf1P6g9TUQ4KW95YtA'></script>

<div id="map_canvas" style="width:1200px !important; height: 900px !important;margin:0 !important;    padding-right: 0 !important;
    padding-left: 0 !important;
    margin-right: 0 !important;
    margin-left: 0 !important;" ></div>

<script type="text/javascript">

    var markers;

    $.ajax({
        url: "/usuariofron/devolverpuntos",
        success: function (data) {
            var array = []
            for (var i = 0; i < data.length; i++) {
                array.push([data[i]["punton"], data[i]["x"], data[i]["y"]])
            }
            markers = array;

            initializeMaps();
        }

    })
    var image = {
        url: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
        // This marker is 20 pixels wide by 32 pixels high.
        size: new google.maps.Size(20, 32),
        // The origin for this image is (0, 0).
        origin: new google.maps.Point(0, 0),
        // The anchor for this image is the base of the flagpole at (0, 32).
        anchor: new google.maps.Point(0, 32)
    };

    function initializeMaps() {
        var myOptions = {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var infowindow = new google.maps.InfoWindow();
        var marker, i;
        var bounds = new google.maps.LatLngBounds();

        for (i = 0; i < markers.length; i++) {
            var pos = new google.maps.LatLng(markers[i][1], markers[i][2]);
            bounds.extend(pos);
            marker = new google.maps.Marker({
                position: pos,
                map: map,
                icon:image
            });
            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function () {
                    infowindow.setContent(markers[i][0]);
                    infowindow.open(map, marker);
                }
            })(marker, i));
        }
        map.fitBounds(bounds);
    }

    initializeMaps();

</script>

